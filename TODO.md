# Что ещё можно сделать

## Проблема кэша

Реализованный механизм кэширования excel файлов весьма ограниченный. При возможности используется файл из кэша, а не подтягивается с диска. Это проблема в случае, если файл на диске был изменён. Тогда в кэше будет находиться неактуальная версия файла.

### Варианты решения

- настроить удаление файлов из кэша спустя некоторое время;
- настроить удаление файла из кэша при переключении на другой файл;
- добавить возможность агенту самому решать, подтягивать новый файл или использовать файл из кэша;

## Проблема многопользовательского агента

Агент может быть использован, как инструмент для работы нескольких пользователей на одном диске.
Но агент сам не может определить, от какого пользователя пришёл запрос, если в самом запросе не передать id пользователя/чата.
Это важно, поскольку агент хранит состояния пользователей.
Open-WebUI в своих запросах не передаёт никакой идентифицирующей информации, поэтому все сообщения оттуда расцениваются, как от одного и того же пользователя.

### Варианты решения

- Использовать в качестве интерфейса, например, Телеграм бота, который может отправлять запросы, включая в них id пользователя.
- Исхитриться и идентифицировать пользователя по совокупности заголовков в запросе (фу).
- Забить на возможность использования агента разными пользователями.

## Мелкие проблемы и задатки на будущее

- Настройка обрезания истории сообщений, чтобы она помещалась в контекст модели.
- Доработка excel-reader под более конкретные задачи.
- Доработка парсера веб-страниц. Сейчас извлекается просто текст со страницы. Возможно, для более конкретных задач нужно будет сделать более комплексное решение.
- Совершенствование промптов.
- Реализация настоящего потокового ответа от агента.
- добавить корректный подсчёт токенов.